(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/gasdata/gasdata"],{"08e9":function(e,t,n){"use strict";n.r(t);var a=n("fe8d"),i=n("9d25");for(var u in i)["default"].indexOf(u)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(u);n("18c4");var o=n("828b"),r=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);t["default"]=r.exports},1807:function(e,t,n){"use strict";(function(e){var a=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n("7eb4")),u=a(n("ee10")),o={onLoad:function(e){this.equipment_model=e.mn,this.time_type=e.timeType,this.equipment_type=e.equipmentType,this.access_token=e.accesstoken,this.factorName=e.factorName,this.factorNumber=e.factorNumber,"real"==e.timeType&&(this.time_type=1,"8"==e.equipmentType&&(this.time_type=2)),"hour"==e.timeType&&(this.time_type=3),console.log("this.factorName-----"+this.factorName),console.log("this.factorNumber"+this.factorNumber)},onReady:function(){this.syncApiData()},data:function(){return{factorName:"",factorNumber:"",equipment_updata_time:"",equipment_model:"",time_type:"",main_equipment_data:"",main_equipment_unit:"",access_token:"",equipment_type:"",equipment:{},temporary_equipment:[],equipment_data:[],todos:[{mn:"MYHJ00002021000080011101",name:"纺织检测中心01"},{mn:"MYHJ00002021000080011102",name:"纺织检测中心02"},{mn:"MYHJ00002021000080011103",name:"纺织检测中心03"}],testdata:[{name:"总烃",data:94.66,unit:"mg/m3"},{name:"非甲烷总烃",data:73.6,unit:"mg/m3"},{name:"甲烷",data:2.6,unit:"mg/m3"},{name:"苯",data:5.3,unit:"mg/m3"},{name:"温度",data:94.6,unit:"%"},{name:"总烃",data:94.6,unit:"mg/m3"},{name:"非甲烷总烃",data:73.6,unit:"mg/m3"},{name:"甲烷",data:2.6,unit:"mg/m3"},{name:"苯",data:5.3,unit:"mg/m3"}],chartData:{},uchartdata:[],xCoords:[],charts_group:[],categories:[],series:[],opts:{color:["#1890FF","#91CB74","#FAC858","#EE6666","#73C0DE","#3CA272","#FC8452","#9A60B4","#ea7ccc"],padding:[15,10,0,15],legend:{},background:"rgba(78, 78, 78, 0.0)",enableScroll:!0,scrollAlign:"left",xAxis:{disableGrid:!0,itemCount:5,scrollShow:!0},yAxis:{gridType:"dash",dashLength:2},extra:{line:{type:"curve",width:2}}}}},methods:{syncApiData:function(){var e=this;return(0,u.default)(i.default.mark((function t(){var n,a;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.factorName,a=e.factorNumber,"8"==e.equipment_type&&(n="TVOC",a="a99054"),t.next=5,e.syncGetEquipmentData();case 5:e.equipmentFactorData(n,a);case 6:case"end":return t.stop()}}),t)})))()},equipmentFactorData:function(e,t){var n=this;return(0,u.default)(i.default.mark((function a(){return i.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n.xCoords=[],n.charts_group=[],a.next=4,n.syncGetEquipmentFactorData(e,t);case 4:n.categories=n.xCoords,n.series=n.charts_group,n.getServerData(),console.log("时间:"+JSON.stringify(n.categories)+"\n数据："+JSON.stringify(n.series));case 8:case"end":return a.stop()}}),a)})))()},syncGetEquipmentData:function(){var t=this;return new Promise((function(n,a){e.request({url:"https://voc.16861.com/appapi",data:{m:"app",a:"data",mn:t.equipment_model,size:1,type:t.time_type,accesstoken:t.access_token},method:"GET",header:{"Content-Type":"application/json"},success:function(e){200!=e.statusCode&&(console.log("--------"),console.log("网络请求失败"),a("error")),null==e.data.cp&&console.log("空数据"),console.log("测试数据"+JSON.stringify(e.data.cp));var i={},u=[],o=e.data.cp[0],r=JSON.stringify(o.DataTime);for(var c in t.equipment_updata_time=r.slice(9,11)+":"+r.slice(11,13),o)"MN"!=c&&"DataTime"!=c&&"PNUM"!=c&&"PNO"!=c&&"LA"!=c&&"a19002"!=c&&"a34004"!=c&&"a34002"!=c&&"a34001"!=c&&(t.equipment.factorNumber=c,t.equipment.unit=o[c].Unit,"a99054"==c&&(t.main_equipment_data=o[c].Avg,t.main_equipment_unit=o[c].Unit),"a24088"==c&&("1"==t.time_type?t.main_equipment_data=o[c].Rtd:t.main_equipment_data=o[c].Avg,t.main_equipment_unit=o[c].Unit),"ec0000"==c&&(t.main_equipment_data=o[c].Rtd,t.main_equipment_unit=o[c].Unit),"a21028"!=c&&"a21001"!=c||(o[c].Unit="mg/m3"),"a01008"==c&&(o[c].Unit="度"),"1"==t.time_type?(t.equipment.data=o[c].Rtd,i.value=o[c].Rtd):(t.equipment.data=o[c].Avg,i.value=o[c].Avg),t.equipment.name=o[c].Name,t.equipment.unit=o[c].Unit,t.temporary_equipment.push(t.equipment),t.equipment={},i.name=o[c].Name,u.push(i),i={});t.equipment_data=t.temporary_equipment,t.temporary_equipment=[],t.uchartdata=u,n("success")},fail:function(e){console.log(e),a("error")}})}))},syncGetEquipmentFactorData:function(t,n){var a=this;return new Promise((function(i,u){e.request({url:"https://voc.16861.com/appapi",data:{m:"app",a:"data",mn:a.equipment_model,size:10,type:a.time_type,accesstoken:a.access_token},method:"GET",header:{"Content-Type":"application/json"},success:function(e){if(200!=e.statusCode)return console.log("--------"),console.log("网络请求失败"),void u("error");if(null==e.data.cp)return console.log("空数据"),void u("error");var o=e.data.cp,r=[],c={},s=[];for(var m in c.name=t,o)for(var d in o[m])if("MN"!=d)if("DataTime"==d)switch(a.time_type){case 3:r.push(o[m][d].slice(8,10)+":00");break;case 4:r.push(o[m][d].slice(4,6)+"-"+o[m][d].slice(6,8));break;default:r.push(o[m][d].slice(8,10)+":"+o[m][d].slice(10,12));break}else d==n&&(null!=o[m][d].Avg?s.push(o[m][d].Avg):s.push(o[m][d].Rtd));c.data=s,a.xCoords=r,a.charts_group.push(c),i("success")},fail:function(e){console.log(e),u("error")}})}))},getServerData:function(){var e=this;setTimeout((function(){var t={categories:e.categories,series:e.series};e.chartData=JSON.parse(JSON.stringify(t))}),500)}}};t.default=o}).call(this,n("df3c")["default"])},"18c4":function(e,t,n){"use strict";var a=n("359f"),i=n.n(a);i.a},"359f":function(e,t,n){},"9d25":function(e,t,n){"use strict";n.r(t);var a=n("1807"),i=n.n(a);for(var u in a)["default"].indexOf(u)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(u);t["default"]=i.a},add3:function(e,t,n){"use strict";(function(e,t){var a=n("47a9");n("8ed8"),n("c891"),n("861b");a(n("3240"));var i=a(n("08e9"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(i.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},fe8d:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return a}));var a={uRow:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-row/u-row")]).then(n.bind(null,"0e83"))},uCol:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-col/u-col")]).then(n.bind(null,"dd34"))},uGrid:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-grid/u-grid")]).then(n.bind(null,"2530"))},uGridItem:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-grid-item/u-grid-item")]).then(n.bind(null,"3d1c"))},uIcon:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-icon/u-icon")]).then(n.bind(null,"fa69"))},uniTitle:function(){return n.e("uni_modules/uni-title/components/uni-title/uni-title").then(n.bind(null,"dda6"))},qiunDataCharts:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/qiun-data-charts/components/qiun-data-charts/qiun-data-charts")]).then(n.bind(null,"0b1d"))}},i=function(){var e=this.$createElement;this._self._c},u=[]}},[["add3","common/runtime","common/vendor"]]]);